<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Advanced WAF Integration with Terraform</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Advanced WAF Integration with Terraform"/>
  <meta name="product" content="F5 BIG-IP Resources for Terraform"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2023-04-26 11:52:19"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 BIG-IP Resources for Terraform" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Advanced WAF Integration with Terraform &#8212; F5 Modules for Terraform</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/table_styling.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Scenario #1: Creating a WAF Policy" href="awaf-create.html" />
    <link rel="prev" title="AS3 Integration with Terraform" href="../as3-integration.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden">
        <i class="fa fa-align-justify"></i>
      </button>
    </div>
    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 BIG-IP Resources for Terraform  </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">F5 Terraform Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">F5 Terraform Resources Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuring.html">Configuring Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
</ul>
<p class="caption"><span class="caption-text">F5 BIG-IP Provider</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index-bigip.html">F5 BIG-IP Provider Overview</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index-bigip.html#releases-and-versioning">Releases and Versioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">F5 BIG-IP Provider Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigip-modules/index.html">F5 BIG-IP Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../as3-integration.html">AS3 Integration with Terraform</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced WAF Integration with Terraform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integration-resources-and-data-sources">Integration Resources and Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quickstart-and-lab-guides">Quickstart and Lab Guides</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fast-integration/index.html">FAST Integration with Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../do-integration.html">Declarative Onboarding Integration with Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigiq-licensing.html">Licensing BIG-IP with BIG-IQ</a></li>
</ul>
<p class="caption"><span class="caption-text">F5OS Provider</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/index-f5os.html">F5OS Resources for Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/release-notes.html">F5OS Provider Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/f5os-modules.html">F5OS Tenant Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/f5os-qsg.html">F5OS Quick Start Guide</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Advanced WAF Integration with Terraform</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#f5-big-ip-advanced-waf-policy-structure">F5 BIG-IP Advanced WAF Policy structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li><a class="reference internal" href="#integration-resources-and-data-sources">Integration Resources and Data Sources</a></li>
<li><a class="reference internal" href="#quickstart-and-lab-guides">Quickstart and Lab Guides</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">CloudDocs Home</a> &gt; <a href="../../index.html">F5 BIG-IP Resources for Terraform </a> &gt; Advanced WAF Integration with Terraform</li>
          </ul>
      </nav>
      
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="advanced-waf-integration-with-terraform">
<span id="awaf-integration"></span><h1>Advanced WAF Integration with Terraform<a class="headerlink" href="#advanced-waf-integration-with-terraform" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="sidebar admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="https://techdocs.f5.com/en-us/bigip-15-1-0/big-ip-declarative-security-policy/declarative-policy-getting-started.html#concept-1626">Getting Started with Declarative Policies</a>.</li>
<li><a class="reference external" href="https://community.f5.com/t5/technical-articles/manage-f5-big-ip-advanced-waf-policies-with-terraform-intro/ta-p/300828">Manage F5 BIG-IP Advanced WAF Policies with Terraform</a></li>
</ul>
</div>
<p>The F5 BIG-IP Advanced Web Application Firewall (Advanced WAF) security policies can be deployed using the declarative JSON format, facilitating easy integration into a CI/CD pipeline. The declarative policies are extracted from a source control system, for example Git, and imported into the BIG-IP.
Using the provided declarative policy templates, you can modify the necessary parameters, save the JSON file, and import the updated security policy into your BIG-IP devices. The declarative policy copies the content of the template and adds the adjustments and modifications on to it. The templates therefore allow you to concentrate only on the specific settings that need to be adapted for the specific application that the policy protects.</p>
<p>Terraform can be used to manage Advanced WAF policy resource with its adjustments and modifications on a BIG-IP. It outputs an up-to-date WAF Policy in a JSON format so you can store it in a registry and/or push it to your BIG-IP.</p>
<div class="section" id="f5-big-ip-advanced-waf-policy-structure">
<h3>F5 BIG-IP Advanced WAF Policy structure<a class="headerlink" href="#f5-big-ip-advanced-waf-policy-structure" title="Permalink to this headline">¶</a></h3>
<p>The supported declarative policy structure includes three logical sections:</p>
<ul class="simple">
<li><strong>The “core” section</strong> includes all the building parameters of the policy (name, description, enforcement mode, server technologies…).</li>
<li><strong>The “adjustment” section</strong> includes attributes of the policy that override or add to those defined in the template. Attributes included in this section can include both properties that are particular to the protected application, such as server technologies, URLs, or parameters; and modifications to settings defined by the template, such as enabling the Data Guard if it is disabled in the template and specifying Data Guard attributes. In general, the adjustments section is used for defining major features of the policy which are different from template.</li>
<li><strong>The modifications section</strong> includes actions that modify the declarative policy as it is defined in the adjustments section. In general, while the modifications section is used for frequent and granular changes that are required to tune the policy, such as reducing false positives, patching vulnerabilities, etc.</li>
</ul>
<p>When an attribute is defined in both the adjustments and modifications sections, the policy is deployed with the value as it appears in the modifications section. When an attribute appears in the modifications section multiple times, the policy is deployed with the value as it appears in the latest definition in the modifications section.</p>
</div>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before working with declarative policies, make sure you are familiar with the F5 BIG-IP Application Security Manager and general BIG-IP terminology. Information is found in the F5 Knowledge Centers.
To read, modify, or import declarative policies, you must have:</p>
<ul class="simple">
<li>BIG-IP devices running version 16.1.x or later</li>
<li>BIG-IP Administrator role permissions</li>
<li>An active Advanced WAF license on the BIG-IP devices</li>
<li>Terraform provider BIG-IP v1.15.2 and above</li>
</ul>
</div>
<div class="section" id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example usage for json file</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span>data &quot;bigip_waf_entity_parameter&quot; &quot;Param1&quot; {
  name            = &quot;Param1&quot;
  type            = &quot;explicit&quot;
  data_type       = &quot;alpha-numeric&quot;
  perform_staging = true
}

data &quot;bigip_waf_entity_parameter&quot; &quot;Param2&quot; {
  name            = &quot;Param2&quot;
  type            = &quot;explicit&quot;
  data_type       = &quot;alpha-numeric&quot;
  perform_staging = true
}

data &quot;bigip_waf_entity_url&quot; &quot;URL&quot; {
  name     = &quot;URL1&quot;
  protocol = &quot;http&quot;
}

data &quot;bigip_waf_entity_url&quot; &quot;URL2&quot; {
  name = &quot;URL2&quot;
}

resource &quot;bigip_waf_policy&quot; &quot;test-awaf&quot; {
  name                 = &quot;testpolicyravi&quot;
  partition            = &quot;Common&quot;
  template_name        = &quot;POLICY_TEMPLATE_RAPID_DEPLOYMENT&quot;
  application_language = &quot;utf-8&quot;
  enforcement_mode     = &quot;blocking&quot;
  server_technologies  = [&quot;MySQL&quot;, &quot;Unix/Linux&quot;, &quot;MongoDB&quot;]
  parameters           = [data.bigip_waf_entity_parameter.Param1.json, data.bigip_waf_entity_parameter.Param2.json]
  urls                 = [data.bigip_waf_entity_url.URL.json, data.bigip_waf_entity_url.URL2.json]
}
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="integration-resources-and-data-sources">
<h2>Integration Resources and Data Sources<a class="headerlink" href="#integration-resources-and-data-sources" title="Permalink to this headline">¶</a></h2>
<p>F5 BIG-IP Advanced WAF Resources:</p>
<ul class="simple">
<li><a class="reference external" href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/resources/bigip_waf_policy">bigip_waf_policy</a></li>
</ul>
<p>F5 BIG-IP Advanced WAF Data Sources:</p>
<ul class="simple">
<li><a class="reference external" href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/data-sources/bigip_waf_entity_parameters">bigip_waf_entity_parameters</a></li>
<li><a class="reference external" href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/data-sources/bigip_waf_entity_url">bigip_waf_entity_url</a></li>
<li><a class="reference external" href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/data-sources/bigip_waf_pb_suggestions">bigip_waf_pb_suggestions</a></li>
<li><a class="reference external" href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/data-sources/bigip_waf_policy">bigip_waf_policy</a></li>
<li><a class="reference external" href="https://registry.terraform.io/providers/F5Networks/bigip/latest/docs/data-sources/bigip_waf_signatures">bigip_waf_signatures</a></li>
</ul>
</div>
<div class="section" id="quickstart-and-lab-guides">
<h2>Quickstart and Lab Guides<a class="headerlink" href="#quickstart-and-lab-guides" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/f5devcentral/awaf-terraform">Quickstart Guide</a></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="awaf-create.html">Scenario #1: Creating a WAF Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="awaf-import.html">Scenario #2: Managing with Terraform an existing WAF policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="awaf-migrate.html">Scenario #3: Migrating a WAF Policy from one BIG-IP to another BIG-IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="awaf-multiple.html">Scenario #4: Managing an F5 BIG-IP Advanced WAF Policy on different devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="awaf-policybuildersingle.html">Scenario #5: Managing an F5 BIG-IP Advanced WAF Policy with Policy Builder on a single device</a></li>
<li class="toctree-l1"><a class="reference internal" href="awaf-policybuildermultiple.html">Scenario #6: Managing an F5 BIG-IP Advanced WAF Policy with Policy Builder on multiple devices</a></li>
</ul>
</div>
<p>What’s Next?</p>
<ul class="simple">
<li><a class="reference internal" href="../release-notes.html#release-notes"><span class="std std-ref">Release Notes</span></a></li>
<li><a class="reference internal" href="../bigip-modules/index.html#bigip-modules"><span class="std std-ref">BIG-IP Provider Modules</span></a></li>
<li><a class="reference internal" href="../as3-integration.html#as3-integration"><span class="std std-ref">AS3 Integration</span></a></li>
<li><a class="reference internal" href="../fast-integration/index.html#fast-integration"><span class="std std-ref">FAST Integration</span></a></li>
<li><a class="reference internal" href="../do-integration.html#do-integration"><span class="std std-ref">Declarative Onboarding Integration</span></a></li>
<li><a class="reference internal" href="../bigiq-licensing.html#bigiq-licensing"><span class="std std-ref">Licensing with BIG-IQ</span></a></li>
</ul>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="../as3-integration.html" title="AS3 Integration with Terraform" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="awaf-create.html" title="Scenario #1: Creating a WAF Policy" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  </body>
</html>