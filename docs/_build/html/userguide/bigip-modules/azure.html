<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Azure</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Azure"/>
  <meta name="product" content="F5 BIG-IP Resources for Terraform"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2023-04-26 11:50:19"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 BIG-IP Resources for Terraform" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Azure &#8212; F5 Modules for Terraform</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/table_styling.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="GCP" href="gcp.html" />
    <link rel="prev" title="AWS" href="aws.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden">
        <i class="fa fa-align-justify"></i>
      </button>
    </div>
    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 BIG-IP Resources for Terraform  </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">F5 Terraform Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">F5 Terraform Resources Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuring.html">Configuring Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
</ul>
<p class="caption"><span class="caption-text">F5 BIG-IP Provider</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index-bigip.html">F5 BIG-IP Provider Overview</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index-bigip.html#releases-and-versioning">Releases and Versioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">F5 BIG-IP Provider Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">F5 BIG-IP Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aws.html">AWS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcp.html">GCP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../as3-integration.html">AS3 Integration with Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../awaf-integration/index.html">Advanced WAF Integration with Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fast-integration/index.html">FAST Integration with Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../do-integration.html">Declarative Onboarding Integration with Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bigiq-licensing.html">Licensing BIG-IP with BIG-IQ</a></li>
</ul>
<p class="caption"><span class="caption-text">F5OS Provider</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/index-f5os.html">F5OS Resources for Terraform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/release-notes.html">F5OS Provider Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/f5os-modules.html">F5OS Tenant Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../F5OS/f5os-qsg.html">F5OS Quick Start Guide</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Azure</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#password-management">Password Management</a></li>
<li><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li><a class="reference internal" href="#inspec-tool">InSpec Tool</a></li>
<li><a class="reference internal" href="#required-and-optional-input-variables">Required and Optional Input Variables</a></li>
<li><a class="reference internal" href="#output-variables">Output Variables</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">CloudDocs Home</a> &gt; <a href="../../index.html">F5 BIG-IP Resources for Terraform </a> &gt; Azure</li>
          </ul>
      </nav>
      
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="azure">
<span id="bigip-modules-azure"></span><h1>Azure<a class="headerlink" href="#azure" title="Permalink to this headline">¶</a></h1>
<p>This Terraform module deploys N-NIC F5 BIG-IP in Azure cloud. You can deploy multiple instances of BIG-IP with the module count feature.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<div class="sidebar">
<p class="first sidebar-title"><span class="icon fa fa-info-circle fa-lg"></span> Version Notice:</p>
<p class="last">This module is supported on Terraform version 0.13 and newer.</p>
</div>
<p>The templates below are tested on Terraform v0.13.0 and v0.14.0:</p>
<ul class="simple">
<li>provider registry.terraform.io/hashicorp/azurerm v2.28.0</li>
<li>provider registry.terraform.io/hashicorp/null v2.1.2</li>
<li>provider registry.terraform.io/hashicorp/random v2.3.0</li>
<li>provider registry.terraform.io/hashicorp/template v2.1.2</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">BIG-IP version</th>
<th class="head">Terraform v0.13</th>
<th class="head">Terraform v0.14</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>BIG-IP 16.x</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>BIG-IP 15.x</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-even"><td>BIG-IP 14.x</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>BIG-IP 13.x</td>
<td>X</td>
<td>X</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="password-management">
<h2>Password Management<a class="headerlink" href="#password-management" title="Permalink to this headline">¶</a></h2>
<p>By default, the BIG-IP module dynamically generates passwords.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">variable</span> <span class="nx">az_key_vault_authentication</span> <span class="p">{</span>
  <span class="nx">description</span> <span class="o">=</span> <span class="s2">&quot;Whether to use key vault to pass authentication&quot;</span>
  <span class="nx">type</span>        <span class="o">=</span> <span class="nx">bool</span>
  <span class="k">default</span>     <span class="o">=</span> <span class="kc">false</span>
<span class="p">}</span>

<span class="nx">Outputs</span><span class="o">:</span>
<span class="nx">bigip_password</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&quot;xxxxxxxxxxxxxxxxxx&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To use Azure secret key vault, you must enable the variable <code class="docutils literal notranslate"><span class="pre">az_key_vault_authentication</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> and supply the variables (shown below) with key_vault secret name along with resource group name where the Azure key vault is defined.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">variable</span> <span class="nx">az_key_vault_authentication</span> <span class="p">{</span>
  <span class="nx">description</span> <span class="o">=</span> <span class="s2">&quot;Whether to use key vault to pass authentication&quot;</span>
  <span class="nx">type</span>        <span class="o">=</span> <span class="nx">bool</span>
  <span class="k">default</span>     <span class="o">=</span> <span class="kc">false</span>
<span class="p">}</span>

<span class="nx">variable</span> <span class="nx">azure_secret_rg</span> <span class="p">{</span>
  <span class="nx">description</span> <span class="o">=</span> <span class="s2">&quot;The name of the resource group in which the Azure Key Vault exists&quot;</span>
  <span class="nx">type</span>        <span class="o">=</span> <span class="nx">string</span>
  <span class="k">default</span>     <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="nx">variable</span> <span class="nx">azure_keyvault_name</span> <span class="p">{</span>
  <span class="nx">description</span> <span class="o">=</span> <span class="s2">&quot;The name of the Azure Key Vault to use&quot;</span>
  <span class="nx">type</span>        <span class="o">=</span> <span class="nx">string</span>
  <span class="k">default</span>     <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="nx">variable</span> <span class="nx">azure_keyvault_secret_name</span> <span class="p">{</span>
  <span class="nx">description</span> <span class="o">=</span> <span class="s2">&quot;The name of the Azure Key Vault secret containing the password&quot;</span>
  <span class="nx">type</span>        <span class="o">=</span> <span class="nx">string</span>
  <span class="k">default</span>     <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="nx">Outputs</span><span class="o">:</span>
<span class="nx">bigip_password</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&quot;xxxxxxxxxxxxxxxxxx&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<div class="sidebar admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="https://github.com/f5devcentral/terraform-azure-bigip-module/tree/master/examples">Additional common deployment examples</a>.</p>
</div>
<p>There should be one-to-one mapping between subnet_ids and securitygroup_ids. For example, if you have two or more external subnet_ids, you must give the same number of external securitygroup_ids to the module.</p>
<p>Users can have dynamic or static private IP allocation. If the primary/secondary private IP value is null, it will be dynamic or else static private IP allocation. With Static private IP allocation, you can assign primary and secondary private IPs for external interfaces, whereas the primary private IP is for management
and internal interfaces.</p>
<p>If you are using static private IP allocation, you cannot use module count because the same private IPs will be allocated to multiple BIG-IP instances based on the module count.</p>
<p>With Dynamic Private IP Allocation, you must pass null value to primary/secondary private IP declaration and module count will be supported.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Example Deployment with Dynamic Private IP Allocation</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span> Example 1-NIC Deployment Module usage

 module bigip {
   count                   = var.instance_count
   source                      = &quot;../../&quot;
   prefix                      = &quot;bigip-azure-1nic&quot;
   resource_group_name         = &quot;testbigip&quot;
   mgmt_subnet_ids             = [{&quot;subnet_id&quot; = &quot;subnet_id_mgmt&quot; , &quot;public_ip&quot; = true,&quot;private_ip_primary&quot; =  &quot;&quot;}]
   mgmt_securitygroup_ids      = [&quot;securitygroup_id_mgmt&quot;]
   availabilityZones           =  var.availabilityZones


 }


 Example 2-NIC Deployment Module usage

 module bigip {
   count                       = var.instance_count
   source                      = &quot;../../&quot;
   prefix                      = &quot;bigip-azure-2nic&quot;
   resource_group_name         = &quot;testbigip&quot;
   mgmt_subnet_ids             = [{&quot;subnet_id&quot; = &quot;subnet_id_mgmt&quot; , &quot;public_ip&quot; = true, &quot;private_ip_primary&quot; =  &quot;&quot;}]
   mgmt_securitygroup_ids      = [&quot;securitygroup_id_mgmt&quot;]
   external_subnet_ids         = [{&quot;subnet_id&quot; =  &quot;subnet_id_external&quot;, &quot;public_ip&quot; = true,&quot;private_ip_primary&quot; = &quot;&quot;, &quot;private_ip_secondary&quot; = &quot;&quot; }]
   external_securitygroup_ids  = [&quot;securitygroup_id_external&quot;]
   availabilityZones           =  var.availabilityZones
 }


 Example 3-NIC Deployment Module usage

 module bigip {
   count                       = var.instance_count
   source                      = &quot;../../&quot;
   prefix                      = &quot;bigip-azure-3nic&quot;
   resource_group_name         = &quot;testbigip&quot;
   mgmt_subnet_ids             = [{&quot;subnet_id&quot; = &quot;subnet_id_mgmt&quot; , &quot;public_ip&quot; = true, &quot;private_ip_primary&quot; =  &quot;&quot;}]
   mgmt_securitygroup_ids      = [&quot;securitygroup_id_mgmt&quot;]
   external_subnet_ids         = [{&quot;subnet_id&quot; =  &quot;subnet_id_external&quot;, &quot;public_ip&quot; = true, &quot;private_ip_primary&quot; = &quot;&quot;, &quot;private_ip_secondary&quot; = &quot;&quot; }]
   external_securitygroup_ids  = [&quot;securitygroup_id_external&quot;]
   internal_subnet_ids         = [{&quot;subnet_id&quot; =  &quot;subnet_id_internal&quot;, &quot;public_ip&quot;=false, &quot;private_ip_primary&quot; = &quot;&quot; }]
   internal_securitygroup_ids  = [&quot;securitygropu_id_internal&quot;]
   availabilityZones           =  var.availabilityZones
 }

 Example 4-NIC Deployment Module usage (with 2 external public interfaces, one management and internal interface. There should be one-to-one mapping between subnet_ids and securitygroupids).

 module bigip {
   count                       = var.instance_count
   source                      = &quot;../../&quot;
   prefix                      = &quot;bigip-azure-4nic&quot;
   resource_group_name         = &quot;testbigip&quot;
   mgmt_subnet_ids             = [{&quot;subnet_id&quot; = &quot;subnet_id_mgmt&quot; , &quot;public_ip&quot; = true, &quot;private_ip_primary&quot; =  &quot;&quot;}]
   mgmt_securitygroup_ids      = [&quot;securitygroup_id_mgmt&quot;]
   external_subnet_ids         = [{&quot;subnet_id&quot; = &quot;subnet_id_external&quot;, public_ip&quot; = true, &quot;private_ip_primary&quot; = &quot;&quot;, &quot;private_ip_secondary&quot; = &quot;&quot; },{&quot;subnet_id&quot; = subnet_id_external2&quot;, public_ip&quot; = true, &quot;private_ip_primary&quot; = &quot;&quot;, &quot;private_ip_secondary&quot; = &quot;&quot; }]
   external_securitygroup_ids  = [&quot;securitygroup_id_external&quot;,&quot;securitygroup_id_external&quot;]
   internal_subnet_ids         = [{&quot;subnet_id&quot; =  &quot;subnet_id_internal&quot;, &quot;public_ip&quot;=false, &quot;private_ip_primary&quot; = &quot;&quot; }]
   internal_securitygroup_ids  = [&quot;securitygropu_id_internal&quot;]
   availabilityZones           =  var.availabilityZones
 }
</pre></div>
</div>
</div>
<p>Similarly, you can have N-NIC deployments based on user-provided subnet_ids and securitygroup_ids.
With module count, you can deploy multiple BIG-IP instances in the Azure cloud (with the default value of count 1)</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example Deployment with Static Private IP Allocation</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span> <span class="nx">module</span> <span class="nx">bigip</span> <span class="p">{</span>
   <span class="nx">count</span>                      <span class="o">=</span> <span class="kd">var</span><span class="p">.</span><span class="nx">instance_count</span>
   <span class="nx">source</span>                     <span class="o">=</span> <span class="s2">&quot;../../&quot;</span>
   <span class="nx">prefix</span>                     <span class="o">=</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;%s-3nic&quot;</span><span class="p">,</span> <span class="kd">var</span><span class="p">.</span><span class="nx">prefix</span><span class="p">)</span>
   <span class="nx">resource_group_name</span>        <span class="o">=</span> <span class="nx">azurerm_resource_group</span><span class="p">.</span><span class="nx">rg</span><span class="p">.</span><span class="nx">name</span>
   <span class="nx">mgmt_subnet_ids</span>            <span class="o">=</span> <span class="p">[{</span> <span class="s2">&quot;subnet_id&quot;</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">azurerm_subnet</span><span class="p">.</span><span class="nx">mgmt</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s2">&quot;public_ip&quot;</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="s2">&quot;private_ip_primary&quot;</span> <span class="o">=</span>  <span class="s2">&quot;10.2.1.5&quot;</span><span class="p">}]</span>
   <span class="nx">mgmt_securitygroup_ids</span>     <span class="o">=</span> <span class="p">[</span><span class="nx">module</span><span class="p">.</span><span class="nx">mgmt</span><span class="o">-</span><span class="nx">network</span><span class="o">-</span><span class="nx">security</span><span class="o">-</span><span class="nx">group</span><span class="p">.</span><span class="nx">network_security_group_id</span><span class="p">]</span>
   <span class="nx">external_subnet_ids</span>        <span class="o">=</span> <span class="p">[{</span> <span class="s2">&quot;subnet_id&quot;</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">azurerm_subnet</span><span class="p">.</span><span class="nx">external</span><span class="o">-</span><span class="kr">public</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s2">&quot;public_ip&quot;</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
                                 <span class="s2">&quot;private_ip_primary&quot;</span> <span class="o">=</span> <span class="s2">&quot;10.2.2.40&quot;</span><span class="p">,</span><span class="s2">&quot;private_ip_secondary&quot;</span> <span class="o">=</span> <span class="s2">&quot;10.2.2.50&quot;</span> <span class="p">}]</span>
   <span class="nx">external_securitygroup_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nx">module</span><span class="p">.</span><span class="nx">external</span><span class="o">-</span><span class="nx">network</span><span class="o">-</span><span class="nx">security</span><span class="o">-</span><span class="nx">group</span><span class="o">-</span><span class="kr">public</span><span class="p">.</span><span class="nx">network_security_group_id</span><span class="p">]</span>
   <span class="nx">internal_subnet_ids</span>        <span class="o">=</span> <span class="p">[{</span> <span class="s2">&quot;subnet_id&quot;</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">azurerm_subnet</span><span class="p">.</span><span class="nx">internal</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s2">&quot;public_ip&quot;</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;private_ip_primary&quot;</span> <span class="o">=</span> <span class="s2">&quot;10.2.3.40&quot;</span><span class="p">}]</span>
   <span class="nx">internal_securitygroup_ids</span> <span class="o">=</span> <span class="p">[</span><span class="nx">module</span><span class="p">.</span><span class="nx">internal</span><span class="o">-</span><span class="nx">network</span><span class="o">-</span><span class="nx">security</span><span class="o">-</span><span class="nx">group</span><span class="p">.</span><span class="nx">network_security_group_id</span><span class="p">]</span>
   <span class="nx">availabilityZones</span>          <span class="o">=</span> <span class="kd">var</span><span class="p">.</span><span class="nx">availabilityZones</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="inspec-tool">
<h2>InSpec Tool<a class="headerlink" href="#inspec-tool" title="Permalink to this headline">¶</a></h2>
<p>The BIG-IP Automation Toolchain InSpec Profile is used for testing the readiness of Automation Tool Chain (ATC) components. After the module deployment, you can use the InSpec tool to verify BIG-IP connectivity with ATC components.</p>
<p>This InSpec profile evaluates the following:</p>
<ul class="simple">
<li>Basic connectivity to a BIG-IP management endpoint: <code class="docutils literal notranslate"><span class="pre">bigip-connectivity</span></code></li>
<li>Availability of the Declarative Onboarding (DO) service: <code class="docutils literal notranslate"><span class="pre">bigip-declarative-onboarding</span></code></li>
<li>Version reported by the Declarative Onboarding (DO) service: <code class="docutils literal notranslate"><span class="pre">bigip-declarative-onboarding-version</span></code></li>
<li>Availability of the Application Services (AS3) service: <code class="docutils literal notranslate"><span class="pre">bigip-application-services</span></code></li>
<li>Version reported by the Application Services (AS3) service: <code class="docutils literal notranslate"><span class="pre">bigip-application-services-version</span></code></li>
<li>Availability of the Telemetry Streaming (TS) service: <code class="docutils literal notranslate"><span class="pre">bigip-telemetry-streaming</span></code></li>
<li>Version reported by the Telemetry Streaming (TS) service: <code class="docutils literal notranslate"><span class="pre">bigip-telemetry-streaming-version</span></code></li>
<li>Availability of the Cloud Failover Extension (CFE) service: <code class="docutils literal notranslate"><span class="pre">bigip-cloud-failover-extension</span></code></li>
<li>Version reported by the Cloud Failover Extension (CFE) service: <code class="docutils literal notranslate"><span class="pre">bigip-cloud-failover-extension-version</span></code></li>
</ul>
<p>To run InSpec tests, you can either run the inspec exec command or execute runtests.sh in any one of example NIC folders which will run below the inspec command. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>inspec exec inspec/bigip-ready --input bigip_address=$BIGIP_MGMT_IP bigip_port=$BIGIP_MGMT_PORT user=$BIGIP_USER password=$BIGIP_PASSWORD do_version=$DO_VERSION as3_version=$AS3_VERSION ts_version=$TS_VERSION fast_version=$FAST_VERSION cfe_version=$CFE_VERSION
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="required-and-optional-input-variables">
<h2>Required and Optional Input Variables<a class="headerlink" href="#required-and-optional-input-variables" title="Permalink to this headline">¶</a></h2>
<p>Required variables must be set in the module block when using this module. Optional variables have default values and do not have to be set to use this module. You may set these variables to override their default values.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="8%" />
<col width="9%" />
<col width="20%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Type</th>
<th class="head">Required</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>prefix</td>
<td>String</td>
<td>Required</td>
<td>N/A</td>
<td>This value is inserted in the beginning
of each Azure object.
Note: Requires alpha-numeric without
special characters.</td>
</tr>
<tr class="row-odd"><td>resource_group_name</td>
<td>String</td>
<td>Required</td>
<td>N/A</td>
<td>The name of the resource group in which
the resources will be created.</td>
</tr>
<tr class="row-even"><td>mgmt_subnet_ids</td>
<td>List of
maps</td>
<td>Required</td>
<td>N/A</td>
<td>Map with Subnet-id and public_ip as
keys for the management subnet.</td>
</tr>
<tr class="row-odd"><td>mgmt_securitygroup_ids</td>
<td>List</td>
<td>Required</td>
<td>N/A</td>
<td>securitygroup_ids for the management
interface.</td>
</tr>
<tr class="row-even"><td>availabilityZones</td>
<td>List</td>
<td>Required</td>
<td>N/A</td>
<td>availabilityZones</td>
</tr>
<tr class="row-odd"><td>instance_count</td>
<td>Number</td>
<td>Required</td>
<td>N/A</td>
<td>Number of BIG-IP instances to spin up.</td>
</tr>
<tr class="row-even"><td>f5_username</td>
<td>String</td>
<td>Optional</td>
<td>bigipuser</td>
<td>The admin username of the F5 BIG-IP
that will be deployed.</td>
</tr>
<tr class="row-odd"><td>f5_instance_type</td>
<td>String</td>
<td>Optional</td>
<td>Standard_DS3_v2</td>
<td>Specifies the size of the virtual
machine.</td>
</tr>
<tr class="row-even"><td>f5_image_name</td>
<td>String</td>
<td>Optional</td>
<td>f5-bigip-virtual-edit
ion-200m-best-hourly</td>
<td>5 SKU (image) you want to deploy.
Note: The disk size of the VM will be
determined based on the option you
select.
Important: If intending to provision
multiple modules, ensure the
appropriate value is selected, such as
AllTwoBootLocations or
AllOneBootLocation.</td>
</tr>
<tr class="row-odd"><td>f5_version</td>
<td>String</td>
<td>Optional</td>
<td>latest</td>
<td>It is set to default to use the latest
software.</td>
</tr>
<tr class="row-even"><td>f5_product_name</td>
<td>String</td>
<td>Optional</td>
<td>f5-big-ip-best</td>
<td>Azure BIG-IP VE Offer.</td>
</tr>
<tr class="row-odd"><td>storage_account_type</td>
<td>String</td>
<td>Optional</td>
<td>Standard_LRS</td>
<td>Defines the type of storage account to
be created. Valid options are
Standard_LRS, Standard_ZRS,
Standard_GRS, Standard_RAGRS, and
Premium_LRS.</td>
</tr>
<tr class="row-even"><td>enable_accelerated_networking</td>
<td>Boolean</td>
<td>Optional</td>
<td>FALSE</td>
<td>Enable accelerated networking on
Network interface.</td>
</tr>
<tr class="row-odd"><td>enable_ssh_key</td>
<td>Boolean</td>
<td>Optional</td>
<td>TRUE</td>
<td>Enable ssh key authentication in Linux
Virtual Machine.</td>
</tr>
<tr class="row-even"><td>f5_ssh_publickey</td>
<td>String</td>
<td>Optional</td>
<td>~/.ssh/id_rsa.pub</td>
<td>Path to the public key to be used for
SSH access to the VM. Only used with
non-Windows VMs and can be left as-is
even if using Windows VMs. If you are
specifying a path to a certification on
a Windows machine to provision a linux
VM, use the <code class="docutils literal notranslate"><span class="pre">/</span></code> in the path instead
of a backslash. For example:
<code class="docutils literal notranslate"><span class="pre">c:/home/id_rsa.pub</span></code></td>
</tr>
<tr class="row-odd"><td>doPackageUrl</td>
<td>String</td>
<td>Optional</td>
<td>latest</td>
<td>URL to download the BIG-IP Declarative
Onboarding module.</td>
</tr>
<tr class="row-even"><td>as3PackageUrl</td>
<td>String</td>
<td>Optional</td>
<td>latest</td>
<td>URL to download the BIG-IP Application
Service Extension 3 (AS3) module.</td>
</tr>
<tr class="row-odd"><td>tsPackageUrl</td>
<td>String</td>
<td>Optional</td>
<td>latest</td>
<td>URL to download the BIG-IP Telemetry
Streaming module.</td>
</tr>
<tr class="row-even"><td>fastPackageUrl</td>
<td>String</td>
<td>Optional</td>
<td>latest</td>
<td>URL to download the BIG-IP FAST module.</td>
</tr>
<tr class="row-odd"><td>cfePackageUrlL</td>
<td>String</td>
<td>Optional</td>
<td>latest</td>
<td>URL to download the BIG-IP Cloud
Failover Extension module.</td>
</tr>
<tr class="row-even"><td>libs_dir</td>
<td>String</td>
<td>Optional</td>
<td>/config/cloud/azure
/node_modules</td>
<td>Directory on the BIG-IP to download the
A&amp;O Toolchain.</td>
</tr>
<tr class="row-odd"><td>onboard_log</td>
<td>String</td>
<td>Optional</td>
<td>/var/log/startup
-script.log</td>
<td>Directory on the BIG-IP to store the
cloud-init logs.</td>
</tr>
<tr class="row-even"><td>azure_secret_rg</td>
<td>String</td>
<td>Optional</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></td>
<td>The name of the resource group in which
the Azure Key Vault exists.</td>
</tr>
<tr class="row-odd"><td>az_key_vault_authentication</td>
<td>String</td>
<td>Optional</td>
<td>false</td>
<td>Whether to use key vault to pass
authentications.</td>
</tr>
<tr class="row-even"><td>azure_keyvault_name</td>
<td>String</td>
<td>Optional</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></td>
<td>Directory on the BIG-IP to store the
cloud-init logs.</td>
</tr>
<tr class="row-odd"><td>azure_keyvault_secret_name</td>
<td>String</td>
<td>Optional</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></td>
<td>The name of the Azure Key Vault secret
containing the password.</td>
</tr>
<tr class="row-even"><td>external_subnet_ids</td>
<td>List of
Maps</td>
<td>Optional</td>
<td>[{ “subnet_id” = null
, “public_ip” = null,
“private_ip_primary”
= “”, “private_ip_sec
ondary” = “” }]</td>
<td>The subnet ID of the virtual network
where the virtual machines will reside.</td>
</tr>
<tr class="row-odd"><td>internal_subnet_ids</td>
<td>List of
Maps</td>
<td>Optional</td>
<td>[{ “subnet_id” =
null, “public_ip” =
null,”private_ip_prim
ary” = “” }]</td>
<td>List of maps of subnet IDs of the
virtual network where the virtual
machines will reside.</td>
</tr>
<tr class="row-even"><td>external_securitygroup_ids</td>
<td>List</td>
<td>Optional</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code></td>
<td>List of Network Security Group IDs for
external network.</td>
</tr>
<tr class="row-odd"><td>internal_securitygroup_ids</td>
<td>List</td>
<td>Optional</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code></td>
<td>List of Network Security Group IDs for
internal network.</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="output-variables">
<h2>Output Variables<a class="headerlink" href="#output-variables" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description/Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mgmtPublicIP</td>
<td>The actual IP address allocated for the resource.</td>
</tr>
<tr class="row-odd"><td>mgmtPublicDNS</td>
<td>FQDN to connect to the first VM provisioned.</td>
</tr>
<tr class="row-even"><td>mgmtPort</td>
<td>The Mgmt Port.</td>
</tr>
<tr class="row-odd"><td>f5_username</td>
<td>BIG-IP username.</td>
</tr>
<tr class="row-even"><td>bigip_password</td>
<td>The BIG-IP Password. If <code class="docutils literal notranslate"><span class="pre">dynamic_password</span></code> is selected, then it will be a randomly generated password. If <code class="docutils literal notranslate"><span class="pre">azure_keyvault</span></code> is selected, then it will be a key vault secret name.</td>
</tr>
<tr class="row-odd"><td>private_addresses</td>
<td>List of BIG-IP private addresses.</td>
</tr>
<tr class="row-even"><td>public_addresses</td>
<td>List of BIG-IP public addresses.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A local json file will be generated which contains the DO declaration (for 1,2,3 NICs as provided in the examples).</p>
</div>
<p>What’s Next?</p>
<ul class="simple">
<li><a class="reference internal" href="aws.html#bigip-modules-aws"><span class="std std-ref">AWS module</span></a></li>
<li><a class="reference internal" href="gcp.html#bigip-modules-gcp"><span class="std std-ref">GCP module</span></a></li>
<li><a class="reference internal" href="../release-notes.html#release-notes"><span class="std std-ref">Release Notes</span></a></li>
<li><a class="reference internal" href="index.html#bigip-modules"><span class="std std-ref">BIG-IP Provider Modules</span></a></li>
<li><a class="reference internal" href="../as3-integration.html#as3-integration"><span class="std std-ref">AS3 Integration</span></a></li>
<li><a class="reference internal" href="../awaf-integration/index.html#awaf-integration"><span class="std std-ref">Advanced WAF Integration</span></a></li>
<li><a class="reference internal" href="../fast-integration/index.html#fast-integration"><span class="std std-ref">FAST Integration</span></a></li>
<li><a class="reference internal" href="../do-integration.html#do-integration"><span class="std std-ref">Declarative Onboarding Integration</span></a></li>
<li><a class="reference internal" href="../bigiq-licensing.html#bigiq-licensing"><span class="std std-ref">Licensing with BIG-IQ</span></a></li>
</ul>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="aws.html" title="AWS" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="gcp.html" title="GCP" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  </body>
</html>